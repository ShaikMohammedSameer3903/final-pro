import{r as s,j as e,B as d,S as f}from"./index-BadHY94B.js";import{l as b,s as C}from"./storage-u__IuSh8.js";function y(o){return String(o).padStart(2,"0")}function E(o){const m=Math.floor(o/60),i=o%60;return`${y(m)}:${y(i)}`}function A(){const[i,x]=s.useState("work"),[n,l]=s.useState(!1),[h,u]=s.useState(1500),v=s.useMemo(()=>b(f.pomodoroHistory,[]),[]),[r,j]=s.useState(v),a=s.useRef(null);s.useEffect(()=>{C(f.pomodoroHistory,r)},[r]),s.useEffect(()=>{if(n)return a.current=window.setInterval(()=>{u(t=>t<=1?0:t-1)},1e3),()=>{a.current&&window.clearInterval(a.current),a.current=null}},[n]),s.useEffect(()=>{if(!n||h!==0)return;const t=i,c=t==="work"?"break":"work";x(c),u(c==="work"?1500:300),t==="work"&&j(N=>[{endedAt:new Date().toISOString(),durationMinutes:25},...N])},[h,n,i]);const S=()=>l(!0),w=()=>l(!1),g=()=>{l(!1),x("work"),u(1500)},k=()=>j([]),p=r.length;return e.jsx("div",{className:"container",children:e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Pomodoro Timer"}),e.jsx("p",{className:"p",children:"25 / 5 cycle with session history saved locally."}),e.jsx("div",{style:{height:16}}),e.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[e.jsxs("span",{className:"badge",children:["Mode: ",i==="work"?"Work (25m)":"Break (5m)"]}),e.jsxs("span",{className:"badge",children:["Sessions: ",p]})]}),e.jsx("div",{style:{height:16}}),e.jsx("div",{className:"card",style:{boxShadow:"none",background:"rgba(255,255,255,0.06)",borderRadius:18},children:e.jsxs("div",{className:"section",style:{textAlign:"center"},children:[e.jsx("div",{style:{fontSize:54,fontWeight:900,letterSpacing:1},children:E(h)}),e.jsx("div",{className:"muted",children:n?"Running":"Paused"}),e.jsx("div",{style:{height:14}}),e.jsxs("div",{className:"row",style:{justifyContent:"center"},children:[n?e.jsx(d,{variant:"secondary",onClick:w,children:"Pause"}):e.jsx(d,{onClick:S,children:"Start"}),e.jsx(d,{variant:"secondary",onClick:g,children:"Reset"})]})]})})]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[e.jsx("div",{className:"h2",style:{margin:0},children:"Session History"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:k,disabled:!r.length,children:"Clear"})]}),e.jsx("div",{style:{height:10}}),r.length?e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Ended At"}),e.jsx("th",{children:"Duration"})]})}),e.jsx("tbody",{children:r.slice(0,25).map((t,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(t.endedAt).toLocaleString()}),e.jsxs("td",{children:[t.durationMinutes,"m"]})]},c))})]}):e.jsx("div",{className:"muted",children:"No sessions yet. Complete a 25-minute work session to log it."})]})})]})})}export{A as default};
