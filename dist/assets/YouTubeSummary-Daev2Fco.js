import{r as i,j as e,B as u}from"./index-BadHY94B.js";import{h as f}from"./html2pdf-B8jzlkZ7.js";function w(a,o){const l=new Blob([a],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(l),t=document.createElement("a");t.href=r,t.download=o,t.click(),URL.revokeObjectURL(r)}function g(a){try{const l=new URL(a).hostname.replace(/^www\./,"");return l==="youtube.com"||l==="m.youtube.com"||l==="youtu.be"}catch{return!1}}function U(){const[a,o]=i.useState(""),[l,r]=i.useState(!1),[t,h]=i.useState(null),[c,x]=i.useState(""),d=i.useRef(null),j=i.useMemo(()=>!!a.trim()&&g(a.trim()),[a]),y=async()=>{const s=a.trim();if(s){r(!0);try{const p=`https://www.youtube.com/oembed?url=${encodeURIComponent(s)}&format=json`,m=await fetch(p);if(!m.ok)throw new Error("Failed to fetch YouTube metadata");const n=await m.json();h({title:n.title||"",authorName:n.author_name||"",authorUrl:n.author_url||"",thumbnailUrl:n.thumbnail_url||"",html:n.html||"",url:s})}finally{r(!1)}}},b=()=>{if(!t)return;const s=`YouTube Summary

Title: ${t.title}
Channel: ${t.authorName}
Channel URL: ${t.authorUrl}
Video URL: ${t.url}

Summary:
${c}
`;w(s,"youtube_summary.txt")},v=async()=>{if(!d.current)return;const s={margin:10,filename:"youtube_summary.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["css","legacy"]}};await f().set(s).from(d.current).save()};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"YouTube Link Summary"}),e.jsx("p",{className:"p",children:"Paste a YouTube URL, fetch video metadata, write a manual summary, export as TXT/PDF."})]}),e.jsx("span",{className:"badge",children:"No AI backend"})]}),e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("label",{className:"label",children:"YouTube URL"}),e.jsx("input",{className:"input",value:a,placeholder:"https://www.youtube.com/watch?v=...",onChange:s=>{o(s.target.value),h(null)}}),e.jsx("div",{style:{height:12}}),e.jsx("div",{className:"row",children:e.jsx(u,{onClick:y,disabled:!j||l,children:l?"Fetchingâ€¦":"Fetch Metadata"})}),e.jsx("div",{style:{height:12}}),e.jsx("label",{className:"label",children:"Manual summary"}),e.jsx("textarea",{className:"textarea",rows:6,value:c,onChange:s=>x(s.target.value)}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{className:"row",children:[e.jsx(u,{onClick:b,disabled:!t,children:"Download TXT"}),e.jsx(u,{variant:"secondary",onClick:v,disabled:!t,children:"Download PDF"})]}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{ref:d,style:{background:"white",color:"#111",borderRadius:12,padding:14},children:[e.jsx("div",{style:{fontWeight:900,fontSize:18},children:"YouTube Summary"}),e.jsx("div",{style:{height:8}}),t?e.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:[e.jsxs("div",{children:[e.jsx("b",{children:"Title:"})," ",t.title]}),e.jsxs("div",{children:[e.jsx("b",{children:"Channel:"})," ",t.authorName]}),e.jsxs("div",{children:[e.jsx("b",{children:"Video URL:"})," ",t.url]}),e.jsx("div",{style:{height:10}}),e.jsx("div",{children:e.jsx("b",{children:"Summary"})}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:c||"-"})]}):e.jsx("div",{style:{color:"#444"},children:"Paste a YouTube URL and fetch metadata."})]})]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{margin:0},children:"Preview"}),e.jsx("div",{style:{height:10}}),t?e.jsxs("div",{className:"grid",style:{gap:10},children:[t.thumbnailUrl?e.jsx("img",{src:t.thumbnailUrl,alt:"Thumbnail",style:{width:"100%",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"}}):null,e.jsx("div",{className:"card",style:{boxShadow:"none"},children:e.jsxs("div",{className:"section",style:{padding:12},children:[e.jsx("div",{style:{fontWeight:900},children:t.title}),e.jsx("div",{className:"muted",style:{marginTop:6},children:t.authorName})]})})]}):e.jsx("div",{className:"muted",children:"No metadata loaded yet."}),e.jsx("div",{style:{height:12}}),e.jsx("div",{className:"muted",children:"Interview note: this uses YouTube oEmbed (no API key) and stores nothing on a server."})]})})]})]})}export{U as default};
