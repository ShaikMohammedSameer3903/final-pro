import{r as d,j as e,B as o,L as m}from"./index-BadHY94B.js";import{b as p}from"./pdfUtils-BHE98wr3.js";import"./PDFButton-Bd-pmcYz.js";function h(s){if(!s&&s!==0)return"-";const a=["B","KB","MB","GB"];let l=s,n=0;for(;l>=1024&&n<a.length-1;)l/=1024,n++;return`${l.toFixed(n===0?0:2)} ${a[n]}`}function v(){const[s,a]=d.useState(null),[l,n]=d.useState(!1),[i,c]=d.useState(null),u=d.useMemo(()=>i?URL.createObjectURL(i):null,[i]),x=async()=>{if(s){n(!0),c(null);try{const t=await p(s);c(t)}finally{n(!1)}}},j=()=>{var r;if(!i)return;const t=document.createElement("a");t.href=u,t.download=`${((r=s==null?void 0:s.name)==null?void 0:r.replace(/\.pdf$/i,""))||"compressed"}.pdf`,document.body.appendChild(t),t.click(),t.remove()};return e.jsx("div",{className:"container",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"PDF Compressor"}),e.jsx("p",{className:"p",children:"Client-side best-effort PDF re-save to reduce size when possible."}),e.jsx("div",{style:{height:14}}),e.jsxs("div",{className:"row",style:{alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"label",children:"Upload PDF"}),e.jsx("input",{className:"input",type:"file",accept:"application/pdf",onChange:t=>{var r;return a(((r=t.target.files)==null?void 0:r[0])||null)}})]}),e.jsx(o,{onClick:x,disabled:!s||l,children:"Compress"}),e.jsx(o,{variant:"secondary",onClick:j,disabled:!i||l,children:"Download"})]}),e.jsx("div",{style:{height:14}}),l?e.jsx(m,{label:"Compressingâ€¦"}):null,e.jsx("div",{style:{height:10}}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"File"}),e.jsx("th",{children:"Size"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Original"}),e.jsx("td",{children:s?h(s.size):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Output"}),e.jsx("td",{children:i?h(i.size):"-"})]})]})]})]})})})}export{v as default};
