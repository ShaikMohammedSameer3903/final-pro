import{r as g,j as e,B as j}from"./index-BadHY94B.js";import{P as x}from"./PDFButton-Bd-pmcYz.js";async function b(t){return await t.arrayBuffer()}async function v(t){const i=new Blob([await t.arrayBuffer()],{type:t.type});return await createImageBitmap(i)}function B(t,i){const r=new Blob([t],{type:"application/pdf"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=i,o.click(),URL.revokeObjectURL(n)}function F(){const[t,i]=g.useState([]),[r,n]=g.useState(!1),o=g.useMemo(()=>t.reduce((a,c)=>a+c.size,0),[t]),h=async()=>{if(t.length){n(!0);try{const a=await x.create();for(const l of t){const p=await b(l),f=l.type==="image/png",u=l.type==="image/jpeg"||l.type==="image/jpg";let s;if(f)s=await a.embedPng(p);else if(u)s=await a.embedJpg(p);else{const m=await v(l),d=document.createElement("canvas");d.width=m.width,d.height=m.height,d.getContext("2d").drawImage(m,0,0);const y=await(await new Promise(w=>d.toBlob(w,"image/jpeg",.92))).arrayBuffer();s=await a.embedJpg(y)}a.addPage([s.width,s.height]).drawImage(s,{x:0,y:0,width:s.width,height:s.height})}const c=await a.save();B(c,"images.pdf")}finally{n(!1)}}};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Images → PDF"}),e.jsx("p",{className:"p",children:"Combine multiple images into one PDF. Everything stays on your device."})]}),e.jsx("span",{className:"badge",children:"Frontend only"})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("label",{className:"label",children:"Select images"}),e.jsx("input",{className:"input",type:"file",accept:"image/*",multiple:!0,onChange:a=>i(Array.from(a.target.files||[]))}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[e.jsxs("div",{className:"muted",children:[t.length," file(s) • ",(o/1024/1024).toFixed(2)," MB"]}),e.jsx(j,{onClick:h,disabled:!t.length||r,children:r?"Building…":"Download PDF"})]}),e.jsx("div",{style:{height:12}}),e.jsx("div",{className:"grid cols-3",children:t.map(a=>e.jsx("div",{className:"card",style:{boxShadow:"none"},children:e.jsxs("div",{className:"section",style:{padding:12},children:[e.jsx("div",{style:{fontWeight:800,marginBottom:6,fontSize:13,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:a.name}),e.jsx("img",{src:URL.createObjectURL(a),alt:a.name,style:{width:"100%",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"},onLoad:c=>URL.revokeObjectURL(c.currentTarget.src)})]})},a.name))})]})})]})}export{F as default};
