import{r as l,j as e,B as r}from"./index-BadHY94B.js";import{h as y}from"./html2pdf-B8jzlkZ7.js";function d(a,t){const n=t==="image"?{type:t,value:""}:{type:t,value:""};return[...a,n]}function f(a,t){return a.type==="h1"?e.jsx("h1",{style:{margin:"8px 0"},children:a.value},t):a.type==="h2"?e.jsx("h2",{style:{margin:"8px 0"},children:a.value},t):a.type==="image"?a.value?e.jsx("div",{style:{margin:"10px 0"},children:e.jsx("img",{alt:"",src:a.value,style:{maxWidth:"100%",borderRadius:10}})},t):null:e.jsx("p",{style:{margin:"8px 0",lineHeight:1.6},children:a.value},t)}function C(){const[a,t]=l.useState(""),[n,i]=l.useState([{type:"p",value:""}]),[p,u]=l.useState(!1),o=l.useRef(null),x=l.useMemo(()=>n.filter(s=>(s.value||"").trim()),[n]),j=async()=>{if(o.current){u(!0);try{const s={margin:[10,10,10,10],filename:`${(a||"notes").trim().replace(/\s+/g,"_")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["css","legacy"]}};await y().set(s).from(o.current).save()}finally{u(!1)}}};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Notes → PDF"}),e.jsx("p",{className:"p",children:"Write notes with headings and images, then export to PDF."})]}),e.jsx("div",{className:"row",children:e.jsx(r,{onClick:j,disabled:p,children:p?"Exporting…":"Download PDF"})})]}),e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{marginTop:0},children:"Editor"}),e.jsx("label",{className:"label",children:"Document title"}),e.jsx("input",{className:"input",value:a,onChange:s=>t(s.target.value)}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{className:"row",children:[e.jsx(r,{variant:"secondary",size:"sm",onClick:()=>i(s=>d(s,"h1")),children:"Add H1"}),e.jsx(r,{variant:"secondary",size:"sm",onClick:()=>i(s=>d(s,"h2")),children:"Add H2"}),e.jsx(r,{variant:"secondary",size:"sm",onClick:()=>i(s=>d(s,"p")),children:"Add Text"}),e.jsx(r,{variant:"secondary",size:"sm",onClick:()=>i(s=>d(s,"image")),children:"Add Image URL"})]}),e.jsx("div",{style:{height:12}}),e.jsx("div",{className:"grid",style:{gap:10},children:n.map((s,m)=>e.jsx("div",{className:"card",style:{boxShadow:"none"},children:e.jsxs("div",{className:"section",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[e.jsx("span",{className:"badge",children:s.type.toUpperCase()}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>i(h=>h.filter((v,c)=>c!==m)),children:"Remove"})]}),e.jsx("div",{style:{height:10}}),e.jsx("textarea",{className:"textarea",rows:s.type==="image"?2:4,value:s.value,onChange:h=>i(v=>v.map((c,g)=>g===m?{...c,value:h.target.value}:c)),placeholder:s.type==="image"?"Paste image URL (https://...)":"Write here..."})]})},m))})]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{marginTop:0},children:"Preview"}),e.jsxs("div",{ref:o,style:{background:"white",color:"#111",borderRadius:12,padding:18,overflow:"hidden"},children:[a!=null&&a.trim()?e.jsx("h1",{style:{marginTop:0},children:a}):null,x.length?x.map(f):e.jsx("div",{style:{color:"#555"},children:"Start writing…"})]})]})})]})]})}export{C as default};
