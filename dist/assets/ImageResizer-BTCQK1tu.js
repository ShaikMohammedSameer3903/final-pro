import{r as n,j as e,B as y}from"./index-BadHY94B.js";async function w(a){const o=URL.createObjectURL(a);try{return await new Promise((i,d)=>{const l=new Image;l.onload=()=>i(l),l.onerror=d,l.src=o})}finally{URL.revokeObjectURL(o)}}function k(a,o){const r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=o,i.click(),URL.revokeObjectURL(r)}function M(){const[a,o]=n.useState(null),[r,i]=n.useState(800),[d,l]=n.useState(800),[m,N]=n.useState(!0),[g,f]=n.useState(.92),[j,p]=n.useState(!1),[x,v]=n.useState(null),[c,R]=n.useState({w:0,h:0}),b=n.useMemo(()=>!c.w||!c.h?1:c.w/c.h,[c]),U=async()=>{if(a){p(!0);try{const t=await w(a),s=document.createElement("canvas");s.width=Math.max(1,Math.round(r)),s.height=Math.max(1,Math.round(d)),s.getContext("2d").drawImage(t,0,0,s.width,s.height);const u=await new Promise(L=>s.toBlob(L,"image/jpeg",g));v(u)}finally{p(!1)}}};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Image Resizer"}),e.jsx("p",{className:"p",children:"Resize images client-side. Export as JPG."})]}),e.jsx("span",{className:"badge",children:"Frontend only"})]}),e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("label",{className:"label",children:"Upload image"}),e.jsx("input",{className:"input",type:"file",accept:"image/*",onChange:async t=>{var u;const s=((u=t.target.files)==null?void 0:u[0])||null;if(o(s),v(null),!s)return;const h=await w(s);R({w:h.width,h:h.height}),i(h.width),l(h.height)}}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{className:"grid",style:{gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gap:12},children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Width"}),e.jsx("input",{className:"input",type:"number",value:r,onChange:t=>{const s=Number(t.target.value||0);i(s),m&&l(Math.round(s/b))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Height"}),e.jsx("input",{className:"input",type:"number",value:d,onChange:t=>{const s=Number(t.target.value||0);l(s),m&&i(Math.round(s*b))}})]})]}),e.jsx("div",{style:{height:10}}),e.jsxs("label",{className:"row",style:{justifyContent:"space-between"},children:[e.jsx("span",{className:"p",style:{margin:0},children:"Maintain aspect ratio"}),e.jsx("input",{type:"checkbox",checked:m,onChange:()=>N(t=>!t)})]}),e.jsx("div",{style:{height:12}}),e.jsxs("label",{className:"label",children:["Quality (",Math.round(g*100),"%)"]}),e.jsx("input",{className:"input",type:"range",min:.5,max:.98,step:.02,value:g,onChange:t=>f(Number(t.target.value))}),e.jsx("div",{style:{height:14}}),e.jsxs("div",{className:"row",children:[e.jsx(y,{onClick:U,disabled:!a||j,children:j?"Resizing…":"Resize"}),e.jsx(y,{variant:"secondary",disabled:!x,onClick:()=>{if(!x)return;const t=((a==null?void 0:a.name)||"image").replace(/\.[^.]+$/,"");k(x,`${t}_${r}x${d}.jpg`)},children:"Download"})]}),e.jsx("div",{style:{height:10}}),c.w?e.jsxs("div",{className:"muted",children:["Original: ",c.w,"×",c.h]}):null]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{margin:0},children:"Preview"}),e.jsx("div",{style:{height:10}}),a?e.jsx("img",{src:URL.createObjectURL(a),alt:"Uploaded",style:{width:"100%",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"},onLoad:t=>URL.revokeObjectURL(t.currentTarget.src)}):e.jsx("div",{className:"muted",children:"Upload an image to preview."})]})})]})]})}export{M as default};
