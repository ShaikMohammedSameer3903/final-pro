import{r as d,j as e,B as u}from"./index-BadHY94B.js";import{h as f}from"./html2pdf-B8jzlkZ7.js";function x(s){if(!s&&s!==0)return"-";const r=["B","KB","MB","GB"];let t=s,a=0;for(;t>=1024&&a<r.length-1;)t/=1024,a+=1;return`${t.toFixed(a===0?0:2)} ${r[a]}`}function g(s,r){const t=new Blob([s],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=r,n.click(),URL.revokeObjectURL(a)}function N(){const[s,r]=d.useState(null),[t,a]=d.useState(null),[n,o]=d.useState(""),c=d.useRef(null),l=d.useRef(null),h=d.useMemo(()=>s?URL.createObjectURL(s):null,[s]),j=()=>{const i=c.current;i&&a({duration:i.duration,width:i.videoWidth,height:i.videoHeight,size:(s==null?void 0:s.size)||0,type:(s==null?void 0:s.type)||"",name:(s==null?void 0:s.name)||""})},v=()=>{if(!t)return;const i=`Video Summary

Name: ${t.name}
Type: ${t.type}
Size: ${x(t.size)}
Resolution: ${t.width}x${t.height}
Duration: ${t.duration.toFixed(2)}s

Summary:
${n}
`;g(i,"video_summary.txt")},p=async()=>{if(!l.current)return;const i={margin:10,filename:"video_summary.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["css","legacy"]}};await f().set(i).from(l.current).save()};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Video Summary"}),e.jsx("p",{className:"p",children:"Upload a video, extract metadata, write a manual summary, export as TXT/PDF."})]}),e.jsx("span",{className:"badge",children:"Frontend only"})]}),e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("label",{className:"label",children:"Upload video"}),e.jsx("input",{className:"input",type:"file",accept:"video/*",onChange:i=>{var m;const y=((m=i.target.files)==null?void 0:m[0])||null;r(y),a(null),o("")}}),e.jsx("div",{style:{height:12}}),e.jsx("label",{className:"label",children:"Manual summary"}),e.jsx("textarea",{className:"textarea",rows:6,value:n,onChange:i=>o(i.target.value)}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{className:"row",children:[e.jsx(u,{onClick:v,disabled:!t,children:"Download TXT"}),e.jsx(u,{variant:"secondary",onClick:p,disabled:!t,children:"Download PDF"})]}),e.jsx("div",{style:{height:12}}),e.jsxs("div",{ref:l,style:{background:"white",color:"#111",borderRadius:12,padding:14},children:[e.jsx("div",{style:{fontWeight:900,fontSize:18},children:"Video Summary"}),e.jsx("div",{style:{height:8}}),t?e.jsxs("div",{style:{fontSize:12,lineHeight:1.4},children:[e.jsxs("div",{children:[e.jsx("b",{children:"Name:"})," ",t.name]}),e.jsxs("div",{children:[e.jsx("b",{children:"Type:"})," ",t.type]}),e.jsxs("div",{children:[e.jsx("b",{children:"Size:"})," ",x(t.size)]}),e.jsxs("div",{children:[e.jsx("b",{children:"Resolution:"})," ",t.width,"Ã—",t.height]}),e.jsxs("div",{children:[e.jsx("b",{children:"Duration:"})," ",t.duration.toFixed(2),"s"]}),e.jsx("div",{style:{height:10}}),e.jsx("div",{children:e.jsx("b",{children:"Summary"})}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:n||"-"})]}):e.jsx("div",{style:{color:"#444"},children:"Upload a video to extract metadata."})]})]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{margin:0},children:"Preview"}),e.jsx("div",{style:{height:10}}),h?e.jsx("video",{ref:c,src:h,controls:!0,onLoadedMetadata:j,style:{width:"100%",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"}}):e.jsx("div",{className:"muted",children:"Upload a video to preview."})]})})]})]})}export{N as default};
