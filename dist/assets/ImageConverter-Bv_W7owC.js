import{r as c,j as e,B as j}from"./index-BadHY94B.js";async function y(s){const l=URL.createObjectURL(s);try{return await new Promise((n,o)=>{const i=new Image;i.onload=()=>n(i),i.onerror=o,i.src=l})}finally{URL.revokeObjectURL(l)}}function w(s,l){const a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.download=l,n.click(),URL.revokeObjectURL(a)}function f(){const[s,l]=c.useState(null),[a,n]=c.useState("image/png"),[o,i]=c.useState(.92),[u,h]=c.useState(!1),[d,g]=c.useState(null),x=c.useMemo(()=>a==="image/png"?"png":a==="image/webp"?"webp":"jpg",[a]),v=async()=>{if(s){h(!0);try{const t=await y(s),r=document.createElement("canvas");r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0);const p=await new Promise(b=>r.toBlob(b,a,o));g(p)}finally{h(!1)}}};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"row",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("div",{className:"h1",style:{fontSize:28},children:"Image Converter"}),e.jsx("p",{className:"p",children:"Convert JPG/PNG/WebP in the browser."})]}),e.jsx("span",{className:"badge",children:"Frontend only"})]}),e.jsxs("div",{className:"split",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"section",children:[e.jsx("label",{className:"label",children:"Upload image"}),e.jsx("input",{className:"input",type:"file",accept:"image/*",onChange:t=>{var m;const r=((m=t.target.files)==null?void 0:m[0])||null;l(r),g(null)}}),e.jsx("div",{style:{height:12}}),e.jsx("label",{className:"label",children:"Output format"}),e.jsxs("select",{className:"select",value:a,onChange:t=>n(t.target.value),children:[e.jsx("option",{value:"image/png",children:"PNG"}),e.jsx("option",{value:"image/jpeg",children:"JPG"}),e.jsx("option",{value:"image/webp",children:"WebP"})]}),e.jsx("div",{style:{height:12}}),e.jsxs("label",{className:"label",children:["Quality (",Math.round(o*100),"%)"]}),e.jsx("input",{className:"input",type:"range",min:.5,max:.98,step:.02,value:o,onChange:t=>i(Number(t.target.value))}),e.jsx("div",{style:{height:14}}),e.jsxs("div",{className:"row",children:[e.jsx(j,{onClick:v,disabled:!s||u,children:u?"Convertingâ€¦":"Convert"}),e.jsx(j,{variant:"secondary",disabled:!d,onClick:()=>{if(!d)return;const t=((s==null?void 0:s.name)||"image").replace(/\.[^.]+$/,"");w(d,`${t}_converted.${x}`)},children:"Download"})]})]})}),e.jsx("div",{className:"card sticky",children:e.jsxs("div",{className:"section",children:[e.jsx("div",{className:"h2",style:{margin:0},children:"Preview"}),e.jsx("div",{style:{height:10}}),s?e.jsx("img",{src:URL.createObjectURL(s),alt:"Uploaded",style:{width:"100%",borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"},onLoad:t=>URL.revokeObjectURL(t.currentTarget.src)}):e.jsx("div",{className:"muted",children:"Upload an image to preview."})]})})]})]})}export{f as default};
